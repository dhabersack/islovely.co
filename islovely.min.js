/*! islovely 1.2.0 */
!function(a){"use strict";a.App=Ember.Application.create(),Ember.Location.registerImplementation("hashbang",Ember.HashLocation.extend({getURL:function(){Ember.get(this,"location").hash.substr(2)},setURL:function(a){Ember.get(this,"location").hash="!"+a,Ember.set(this,"lastSetURL","!"+a)},onUpdateURL:function(b){var c=this,d=Ember.guidFor(this);Ember.$(a).bind("hashchange.ember-location-"+d,function(){Ember.run(function(){var a=location.hash.substr(2);Ember.get(c,"lastSetURL")!==a&&(Ember.set(c,"lastSetURL",null),b(location.hash.substr(2)))})})},formatURL:function(a){return"#!"+a}})),App.Router.map(function(){this.resource("pages"),this.resource("page",{path:"/pages/:page_slug"}),this.resource("posts"),this.resource("post",{path:"/posts/:post_slug"})}),App.Router.reopen({location:"hashbang",didTransition:function(b){this._super(b),a.ga&&(Ember.run.scheduleOnce("afterRender",this,"scrollToTop"),Ember.run.scheduleOnce("afterRender",this,"sendAnalytics"))},scrollToTop:function(){a.scrollTo(0,0)},sendAnalytics:function(){console.log(this.router),console.log("TODO HERE")}}),App.Route=Ember.Route.extend({renderTemplate:function(a,b){this.render();var c="islovely";this.title&&(c=this.title(b)+" | islovely"),document.title=c,this.description&&$("meta[name=description]").attr("content",this.description(b))}}),App.IndexRoute=App.Route.extend({description:function(a){return a.get("description")},model:function(){return this.store.find("page","index")},title:function(a){return a.get("title")}}),App.PageRoute=App.Route.extend({description:function(a){return a.get("description")},model:function(a){return this.store.find("page",a.page_slug)},serialize:function(a){return{page_slug:a.get("slug")}},title:function(a){return a.get("title")}}),App.PagesRoute=App.Route.extend({description:function(){return"Find more information about me and the services I offer."},model:function(){return this.store.find("page")},title:function(){return"Pages"}}),App.PostRoute=App.Route.extend({description:function(a){return a.get("description")},model:function(a){return this.store.find("post",a.post_slug)},serialize:function(a){return{post_slug:a.get("slug")}},title:function(a){return a.get("title")}}),App.PostsRoute=App.Route.extend({description:function(){return"Articles on technology, development, consulting, and teaching."},model:function(){return this.store.find("post")},title:function(){return"Posts"}}),App.ApplicationAdapter=DS.RESTAdapter.extend({host:"http://api.islovely.co"}),App.PostsController=Ember.ArrayController.extend({sortAscending:!1,sortProperties:["id"],sortFunction:function(a,b){return a===b?0:parseInt(a,10)<parseInt(b,10)?-1:1}}),App.Page=DS.Model.extend({body:DS.attr("string"),description:DS.attr("string"),slug:DS.attr("string"),title:DS.attr("string")}),App.Post=DS.Model.extend({body:DS.attr("string"),description:DS.attr("string"),published:DS.attr("date"),slug:DS.attr("string"),title:DS.attr("string")});var b=new Showdown.converter;Ember.Handlebars.registerBoundHelper("markdown",function(a){return new Ember.Handlebars.SafeString(b.makeHtml(a))}),Ember.Handlebars.registerBoundHelper("date",function(a){return new Ember.Handlebars.SafeString(moment(a).format("MMMM Do, YYYY"))})}(window);