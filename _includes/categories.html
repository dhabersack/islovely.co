{% assign posts = include.posts %}
{% assign categories = posts | map: "category" | uniq | sort %}

<div class="categories">
  {% for category in categories %}
    <div class="categories__category">
      <span class="categories__tag">
        {% include category-tag.html category=category %}
      </span>

      <span class="categories__count">
        &times;
        {{ posts | where: "category", category | size }}
      </span>
    </div>
  {% endfor %}
</div>
